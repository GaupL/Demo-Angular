<div class="container">
    <form #formdata="ngForm" (submit)="searchData()">
        <div class="row">
            <div class="col-6">
                <p class="fw-bold fs-4 ms-2 p-2">เพิ่มข้อมูลหนักงาน</p>
            </div>
        </div>
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <div class="row mb-2">
                    <div class="col-2 text-end p-1 fs-6">
                        ชื่อ :
                    </div>
                    <div class="col-4">
                        <input type="text" class="form-control" #txtname="ngModel" name="txtname"
                            [(ngModel)]="serviceCus.model.name" required>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-2 text-end p-1 fs-6">
                        นามสกุล :
                    </div>
                    <div class="col-4">
                        <input type="text" class="form-control" #txtlastname="ngModel" name="txtlastname"
                            [(ngModel)]="serviceCus.model.lastname" required>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-2 text-end p-1 fs-6">
                        ที่อยู่ :
                    </div>
                    <div class="col-4">
                        <input type="text" class="form-control" #txtaddress="ngModel" name="txtaddress"
                            [(ngModel)]="serviceCus.model.address" required>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-3 offset-2">
                        <button class="btn btn-outline-secondary w-25" type="submit">ค้นหา</button>
                    </div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <button class="btn btn-success" (click)="addData()"><i class="fa-solid fa-plus"></i>
                        เพิ่มพนักงาน</button>
                    <span class="text-danger">ผลการค้นหาทั้งหมด {{serviceCus.modelList.length}}</span>
                </div>
            </div>
        </div>
    </form>
</div>
    <div class="container-fluid">
        <div class="card">
            <p-table [value]="serviceCus.modelList" [paginator]="true" [rows]="10" showGridlines
                [tableStyle]="{ 'min-width': '50rem' }" [rowsPerPageOptions]="[10, 15, 20]">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width:5%">#</th>
                        <th style="width:20%;">ชื่อ-นามสกุล</th>
                        <th style="width:10%">ที่อยู่</th>
                        <th style="width:10%">เบอร์โทร</th>
                        <th style="width:10%">ยอดขายต่อเดือน</th>
                        <th style="width:10%">แก้ไข</th>
                        <th style="width:10%">ลบข้อมูล</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-item let-i="rowIndex">
                    <tr>
                        <td>{{ i+1 }}</td>
                        <td>{{ item.name }} {{item.lastname}}</td>
                        <td>{{ item.address }}</td>
                        <td>{{ item.tel }}</td>
                        <td><button class="btn btn-secondary" data-bs-target="#ShowChart" data-bs-toggle="modal"
                                (click)="dataChartById(item)"><i class="fa-solid fa-signal"></i></button></td>
                        <td><button class="btn btn-warning" (click)="EditCustomer(item.cusId)"><i
                                    class="fa-regular fa-pen-to-square"></i></button></td>
                        <td><button class="btn btn-danger" (click)="deleteCus(item.cusId,item)"><i
                                    class="fa-regular fa-trash-can"></i></button></td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
<div class="modal fade" id="ShowChart" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">กราฟแสดงยอดขาย</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="d-flex justify-content-between">
        <p> {{dataSale.name}} {{dataSale.lastname}}</p>
        <select class="form-select text-center" style="width: 15%;" (change)="selectyear()" [(ngModel)]="NewYear">
            <option value="2025">2568</option>
            <option value="2026">2569</option>
            <option value="2027">2570</option>
            <option value="2028">2571</option>
        </select>
        </div>

        <canvas id="MyChart"></canvas>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-bs-dismiss="modal" style="width: 15%;">ปิด</button>
      </div>
    </div>
  </div>
</div>
